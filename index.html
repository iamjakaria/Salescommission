<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arvin Controls | Fire Safety Engineering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; overflow-x: hidden; }
        .tab-content { display: none; min-height: calc(100vh - 100px); }
        .tab-content.active { display: flex; flex-direction: column; }
        .invoice-sub-tab { display: none; }
        .invoice-sub-tab.active { display: block; }
        .btn-back:hover i { transform: translateX(-5px); transition: transform 0.3s ease; }
        .table-container { overflow-x: auto; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #ef4444; }
        
        .autocomplete-wrapper { position: relative; }
        .suggestions-list { 
            position: absolute; top: 100%; left: 0; right: 0; 
            background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem;
            max-height: 250px; overflow-y: auto; z-index: 1000; display: none;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }
        .suggestion-item { padding: 10px 12px; cursor: pointer; border-bottom: 1px solid #f3f4f6; }
        .suggestion-item:last-child { border-bottom: none; }
        .suggestion-item:hover { background-color: #fffaf0; }
        .suggestion-name { font-weight: 600; font-size: 13px; color: #1f2937; display: block; }
        .suggestion-sub { font-size: 11px; color: #ef4444; display: block; margin-top: 1px; }
        .suggestion-desc { font-size: 11px; color: #f59e0b; display: block; margin-top: 1px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-2xl font-bold text-red-600 flex items-center cursor-pointer" onclick="showDashboard()">
                    <i class="fas fa-fire-extinguisher mr-2"></i> <span id="nav-company-name">ARVIN CONTROLS</span>
                </div>
                
                <div id="nav-grid" class="grid grid-cols-4 gap-2 w-full md:w-auto">
                    <button onclick="openTab('clients')" class="flex flex-col items-center justify-center p-3 rounded-lg bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition shadow-sm border border-red-100">
                        <i class="fas fa-users text-lg mb-1"></i>
                        <span class="text-[10px] uppercase font-bold tracking-tight">Clients</span>
                    </button>
                    <button onclick="openTab('products')" class="flex flex-col items-center justify-center p-3 rounded-lg bg-orange-50 text-orange-600 hover:bg-orange-600 hover:text-white transition shadow-sm border border-orange-100">
                        <i class="fas fa-boxes text-lg mb-1"></i>
                        <span class="text-[10px] uppercase font-bold tracking-tight">Products</span>
                    </button>
                    <button onclick="openTab('invoice')" class="flex flex-col items-center justify-center p-3 rounded-lg bg-yellow-50 text-yellow-600 hover:bg-yellow-600 hover:text-white transition shadow-sm border border-yellow-100">
                        <i class="fas fa-file-invoice-dollar text-lg mb-1"></i>
                        <span class="text-[10px] uppercase font-bold tracking-tight">Invoice</span>
                    </button>
                    <button onclick="openTab('settings')" class="flex flex-col items-center justify-center p-3 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-600 hover:text-white transition shadow-sm border border-gray-200">
                        <i class="fas fa-cog text-lg mb-1"></i>
                        <span class="text-[10px] uppercase font-bold tracking-tight">Settings</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="w-full">
        <div id="clients" class="tab-content bg-white">
            <div class="flex items-center p-6 border-b border-red-100">
                <div class="flex-none"><button onclick="showDashboard()" class="btn-back flex items-center gap-2 bg-gray-100 hover:bg-red-600 hover:text-white px-4 py-2 rounded-full transition-all text-xs font-bold uppercase"><i class="fas fa-arrow-left"></i> Back</button></div>
                <div class="flex-grow flex justify-center"><button onclick="toggleClientModal(true)" class="bg-red-600 text-white px-8 py-2 rounded-lg text-xs font-bold hover:bg-red-700 shadow-md"><i class="fas fa-plus mr-1"></i> ADD CLIENT</button></div>
                <div class="flex-none w-[75px] hidden md:block"></div>
            </div>
            <div class="full-screen-container p-6">
                <input type="text" id="clientSearch" onkeyup="filterClients()" placeholder="Search clients..." class="w-full mb-4 pl-4 pr-4 py-2 border border-gray-200 rounded-lg">
                <div class="table-container bg-gray-50 rounded-xl p-4">
                    <table class="w-full text-left border-collapse text-sm">
                        <thead><tr class="text-red-600 border-b-2 border-red-200 uppercase text-xs"><th class="p-3">SL</th><th class="p-3">Clients</th><th class="p-3">Address</th><th class="p-3">Contact</th><th class="p-3">Mobile</th><th class="p-3 text-center">Action</th></tr></thead>
                        <tbody id="clientTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="products" class="tab-content bg-white">
            <div class="flex items-center p-6 border-b border-orange-100">
                <div class="flex-none"><button onclick="showDashboard()" class="btn-back flex items-center gap-2 bg-gray-100 hover:bg-orange-600 hover:text-white px-4 py-2 rounded-full transition-all text-xs font-bold uppercase"><i class="fas fa-arrow-left"></i> Back</button></div>
                <div class="flex-grow flex justify-center"><button onclick="toggleProductModal(true)" class="bg-orange-600 text-white px-8 py-2 rounded-lg text-xs font-bold hover:bg-orange-700 shadow-md"><i class="fas fa-plus mr-1"></i> ADD PRODUCT</button></div>
                <div class="flex-none w-[75px] hidden md:block"></div>
            </div>
            <div class="full-screen-container p-6">
                <input type="text" id="productSearch" onkeyup="filterProducts()" placeholder="Search products..." class="w-full mb-4 pl-4 pr-4 py-2 border border-gray-200 rounded-lg">
                <div class="table-container bg-gray-50 rounded-xl p-4 text-sm">
                    <table class="w-full text-left border-collapse">
                        <thead><tr class="text-orange-600 border-b-2 border-orange-200 uppercase text-xs"><th class="p-3">SL</th><th class="p-3">Items</th><th class="p-3">Unit</th><th class="p-3">Rate</th><th class="p-3">Stock</th><th class="p-3 text-center">Action</th></tr></thead>
                        <tbody id="productTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="invoice" class="tab-content bg-white">
            <div class="flex flex-col md:flex-row items-center p-4 border-b border-yellow-100 gap-4">
                <button onclick="showDashboard()" class="btn-back bg-gray-100 px-4 py-2 rounded-full text-xs font-bold"><i class="fas fa-arrow-left"></i> BACK</button>
                <div class="flex bg-gray-100 p-1 rounded-xl">
                    <button onclick="startNewInvoiceTab()" id="btn-sub-create" class="px-6 py-2 rounded-lg text-xs font-bold transition-all bg-white shadow-sm text-yellow-600 uppercase">Create Invoice</button>
                    <button onclick="switchInvoiceSubTab('saved')" id="btn-sub-saved" class="px-6 py-2 rounded-lg text-xs font-bold transition-all text-gray-500 uppercase">Saved Files</button>
                </div>
                <div class="flex-grow"></div>
                <button id="saveInvoiceBtn" onclick="saveInvoice()" class="bg-green-600 text-white px-6 py-2 rounded-lg text-xs font-bold shadow-md hover:bg-green-700">SAVE INVOICE</button>
            </div>
            
            <div id="invoice-create" class="invoice-sub-tab active">
                <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2 bg-gray-50 p-6 rounded-2xl shadow-inner space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="autocomplete-wrapper">
                                <label class="text-[10px] font-bold text-gray-500 uppercase">Client Name</label>
                                <input type="text" id="invClientInput" oninput="showClientSuggestions()" placeholder="Type client name..." class="w-full border-b-2 bg-transparent py-1">
                                <div id="clientSuggestions" class="suggestions-list"></div>
                            </div>
                            <div>
                                <label class="text-[10px] font-bold text-gray-500 uppercase">Order ID</label>
                                <input type="text" id="invOrderId" class="w-full border-b-2 bg-transparent py-1">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-gray-500 uppercase">Subject</label>
                            <input type="text" id="invSubject" placeholder="Enter invoice subject..." class="w-full border-b-2 bg-transparent py-1 font-bold text-gray-700">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-gray-500 uppercase">Address</label>
                            <input type="text" id="invAddress" readonly class="w-full border-b-2 bg-transparent py-1 text-gray-400">
                        </div>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-2xl shadow-inner space-y-4">
                        <input type="hidden" id="editInvoiceIndex" value="-1">
                        <div>
                            <label class="text-[10px] font-bold text-gray-500 uppercase">Invoice No.</label>
                            <input type="text" id="invNo" readonly class="w-full font-mono font-bold text-red-600 bg-transparent py-1">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-gray-500 uppercase">Date</label>
                            <input type="date" id="invDate" class="w-full border-b-2 bg-transparent py-1">
                        </div>
                    </div>
                </div>

                <div class="px-6 pb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-gray-700">Billing Items</h3>
                        <button onclick="toggleItemModal(true)" class="bg-yellow-500 text-white px-4 py-1 rounded-full text-[10px] font-bold hover:bg-yellow-600">
                            <i class="fas fa-plus mr-1"></i> ADD ITEM
                        </button>
                    </div>
                    <div class="table-container bg-white border rounded-xl overflow-hidden">
                        <table class="w-full text-left border-collapse">
                            <thead class="bg-gray-100 text-[10px] uppercase text-gray-600">
                                <tr><th class="p-3">SL</th><th class="p-3">Item</th><th class="p-3">Qty</th><th class="p-3">Price</th><th class="p-3">Total</th><th class="p-3">Action</th></tr>
                            </thead>
                            <tbody id="invoiceItemsBody" class="text-sm"></tbody>
                            <tfoot class="text-sm border-t-2 border-gray-200">
                                <tr class="border-b">
                                    <td colspan="4" class="p-3 text-right font-bold text-gray-600 bg-gray-50">GRAND TOTAL:</td>
                                    <td id="invGrandTotal" class="p-3 font-black text-yellow-700">0.00</td>
                                    <td class="bg-gray-50"></td>
                                </tr>
                                <tr class="border-b">
                                    <td colspan="4" class="p-3 text-right font-bold text-gray-600 bg-gray-50">PAID AMOUNT:</td>
                                    <td class="p-3">
                                        <input type="number" id="invPaid" oninput="calculateBalance()" class="w-full bg-transparent text-green-600 font-bold focus:ring-0" value="0">
                                    </td>
                                    <td class="bg-gray-50"></td>
                                </tr>
                                <tr class="border-b">
                                    <td colspan="4" class="p-3 text-right font-bold text-gray-600 bg-gray-50">DUE AMOUNT:</td>
                                    <td class="p-3">
                                        <input type="number" id="invDue" readonly class="w-full bg-transparent text-red-600 font-bold" value="0">
                                    </td>
                                    <td class="bg-gray-50"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <div id="invoice-saved" class="invoice-sub-tab p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="savedInvoicesList"></div>
            </div>
        </div>

        <div id="settings" class="tab-content bg-white">
            <div class="p-6">
                <div class="flex items-center mb-6">
                    <button onclick="showDashboard()" class="btn-back flex items-center gap-2 bg-gray-100 hover:bg-gray-600 hover:text-white px-4 py-2 rounded-full transition-all text-xs font-bold uppercase"><i class="fas fa-arrow-left"></i> Back</button>
                    <h2 class="ml-4 text-xl font-bold text-gray-700 uppercase tracking-widest"><i class="fas fa-cogs mr-2 text-red-600"></i> Company Settings</h2>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="space-y-6 bg-blue-50 p-6 rounded-2xl border border-blue-100">
                        <h3 class="font-bold text-blue-700 border-b border-blue-200 pb-2">GENERAL INFORMATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Company Name</label><input type="text" id="setCompanyName" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Slogan / Subtitle</label><input type="text" id="setSlogan" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></div>
                        </div>
                        <div><label class="text-[10px] font-bold text-gray-500 uppercase">Office Address</label><textarea id="setAddress" rows="2" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></textarea></div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Email</label><input type="email" id="setEmail" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Mobile</label><input type="text" id="setMobile" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Website</label><input type="text" id="setWebsite" class="w-full border-b-2 border-blue-200 bg-transparent py-1"></div>
                        </div>
                    </div>

                    <div class="space-y-6 bg-purple-50 p-6 rounded-2xl border border-purple-100">
                        <h3 class="font-bold text-purple-700 border-b border-purple-200 pb-2">AUTHORIZATION & SIGNATORY</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Signatory Name</label><input type="text" id="setSignatoryName" class="w-full border-b-2 border-purple-200 bg-transparent py-1"></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Designation</label><input type="text" id="setSignatoryDesig" class="w-full border-b-2 border-purple-200 bg-transparent py-1"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                            <div>
                                <label class="text-[10px] font-bold text-gray-500 uppercase block mb-1">Company Logo</label>
                                <input type="file" id="setLogo" accept="image/*" class="text-[9px] w-full">
                                <div id="logoPreview" class="mt-2 h-10 w-10 border bg-white rounded flex items-center justify-center overflow-hidden"><i class="fas fa-image text-gray-300"></i></div>
                            </div>
                            <div>
                                <label class="text-[10px] font-bold text-gray-500 uppercase block mb-1">Company Seal</label>
                                <input type="file" id="setSeal" accept="image/*" class="text-[9px] w-full">
                                <div id="sealPreview" class="mt-2 h-10 w-10 border bg-white rounded flex items-center justify-center overflow-hidden"><i class="fas fa-stamp text-gray-300"></i></div>
                            </div>
                            <div>
                                <label class="text-[10px] font-bold text-gray-500 uppercase block mb-1">Signatory Sign</label>
                                <input type="file" id="setSign" accept="image/*" class="text-[9px] w-full">
                                <div id="signPreview" class="mt-2 h-10 w-10 border bg-white rounded flex items-center justify-center overflow-hidden"><i class="fas fa-signature text-gray-300"></i></div>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-2 space-y-6 bg-gray-50 p-6 rounded-2xl border border-gray-200">
                        <h3 class="font-bold text-gray-700 border-b border-gray-300 pb-2">TERMS & CONDITIONS</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Quotation Terms</label><textarea id="termsQuotation" rows="3" class="w-full border rounded-lg p-2 text-xs"></textarea></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Invoice Terms</label><textarea id="termsInvoice" rows="3" class="w-full border rounded-lg p-2 text-xs"></textarea></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">Challan Terms</label><textarea id="termsChallan" rows="3" class="w-full border rounded-lg p-2 text-xs"></textarea></div>
                            <div><label class="text-[10px] font-bold text-gray-500 uppercase">PO Terms</label><textarea id="termsPO" rows="3" class="w-full border rounded-lg p-2 text-xs"></textarea></div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex justify-center">
                    <button onclick="saveSettings()" class="bg-green-600 text-white px-12 py-3 rounded-xl font-bold shadow-xl hover:bg-green-700 hover:scale-105 transition-all uppercase tracking-widest">
                        <i class="fas fa-save mr-2"></i> Save All Settings
                    </button>
                </div>
            </div>
        </div>
    </main>

    <div id="clientModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
            <div class="bg-red-600 p-4 text-white flex justify-between items-center"><h3 class="font-bold" id="clientModalTitle">Add Client</h3><button onclick="toggleClientModal(false)"><i class="fas fa-times"></i></button></div>
            <form id="clientForm" class="p-6 space-y-4">
                <input type="hidden" id="editClientIndex" value="-1">
                <div class="grid grid-cols-4 gap-4">
                    <div class="col-span-1"><label class="text-[10px] font-bold text-gray-500 uppercase">SL</label><input type="number" id="clientSl" disabled class="w-full border-b-2 py-1 bg-gray-50"></div>
                    <div class="col-span-3"><label class="text-[10px] font-bold text-gray-500 uppercase">Client Name *</label><input type="text" id="clientName" required class="w-full border-b-2 py-1"></div>
                </div>
                <div><label class="text-[10px] font-bold text-gray-500 uppercase">Address</label><input type="text" id="address" class="w-full border-b-2 py-1"></div>
                <div class="grid grid-cols-2 gap-4">
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Contact</label><input type="text" id="contactPerson" class="w-full border-b-2 py-1"></div>
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Mobile</label><input type="tel" id="mobile" class="w-full border-b-2 py-1"></div>
                </div>
                <button type="submit" class="w-full bg-red-600 text-white font-bold py-3 rounded-lg uppercase shadow-lg">Save Client</button>
            </form>
        </div>
    </div>

    <div id="productModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
            <div class="bg-orange-600 p-4 text-white flex justify-between items-center"><h3 class="font-bold" id="productModalTitle">Add Product</h3><button onclick="toggleProductModal(false)"><i class="fas fa-times"></i></button></div>
            <form id="productForm" class="p-6 space-y-4">
                <input type="hidden" id="editProductIndex" value="-1">
                <div class="grid grid-cols-4 gap-4">
                    <div class="col-span-1"><label class="text-[10px] font-bold text-gray-500 uppercase">SL</label><input type="number" id="productSl" disabled class="w-full border-b-2 py-1 bg-gray-50"></div>
                    <div class="col-span-3"><label class="text-[10px] font-bold text-gray-500 uppercase">Item Name *</label><input type="text" id="itemName" required class="w-full border-b-2 py-1"></div>
                </div>
                <div><label class="text-[10px] font-bold text-gray-500 uppercase">Description</label><textarea id="description" class="w-full border-b-2 py-1" rows="2"></textarea></div>
                <div class="grid grid-cols-3 gap-4">
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Unit</label><input type="text" id="unit" class="w-full border-b-2 py-1"></div>
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Rate</label><input type="number" id="rate" class="w-full border-b-2 py-1"></div>
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Stock</label><input type="number" id="stockQty" class="w-full border-b-2 py-1"></div>
                </div>
                <button type="submit" class="w-full bg-orange-600 text-white font-bold py-3 rounded-lg uppercase shadow-lg">Save Product</button>
            </form>
        </div>
    </div>

    <div id="itemModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-[150] flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
            <div class="bg-yellow-600 p-4 text-white flex justify-between items-center"><h3 class="font-bold">Add Billing Item</h3><button onclick="toggleItemModal(false)"><i class="fas fa-times"></i></button></div>
            <form id="itemForm" class="p-6 space-y-4">
                <div class="autocomplete-wrapper">
                    <label class="text-[10px] font-bold text-gray-500 uppercase">Search Product</label>
                    <input type="text" id="invProductInput" oninput="showProductSuggestions()" placeholder="Type product name..." class="w-full border-b-2 py-1">
                    <div id="productSuggestions" class="suggestions-list"></div>
                </div>
                <div><label class="text-[10px] font-bold text-gray-500 uppercase">Description</label><textarea id="itemDesc" class="w-full border-b-2 py-1 text-xs" rows="2"></textarea></div>
                <div class="grid grid-cols-3 gap-4">
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Unit</label><input type="text" id="itemUnit" class="w-full border-b-2 py-1" placeholder="Pcs"></div>
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Quantity</label><input type="number" id="itemQty" oninput="calcItemTotal()" class="w-full border-b-2 py-1" value="1"></div>
                    <div><label class="text-[10px] font-bold text-gray-500 uppercase">Unit Price</label><input type="number" id="itemPrice" oninput="calcItemTotal()" class="w-full border-b-2 py-1"></div>
                </div>
                <div><label class="text-[10px] font-bold text-gray-500 uppercase">Total Price</label><input type="number" id="itemTotal" readonly class="w-full border-b-2 py-1 bg-gray-50 font-bold"></div>
                <button type="button" onclick="addItemToInvoice()" class="w-full bg-yellow-600 text-white font-bold py-3 rounded-lg uppercase shadow-lg">Add to List</button>
            </form>
        </div>
    </div>

    <script>
        // Data Store
        let clients = JSON.parse(localStorage.getItem('arvin_clients_list')) || [];
        let products = JSON.parse(localStorage.getItem('arvin_products_list')) || [];
        let invoices = JSON.parse(localStorage.getItem('arvin_invoices_list')) || [];
        let settings = JSON.parse(localStorage.getItem('arvin_settings')) || {
            company: 'ARVIN CONTROLS',
            slogan: 'FIRE SAFETY ENGINEERING & CONSULTANT',
            address: 'Dhaka, Bangladesh',
            email: '', mobile: '', website: '',
            signatory: '', designation: '',
            logo: '', seal: '', sign: '',
            terms_quot: '', terms_inv: '', terms_challan: '', terms_po: ''
        };

        let currentInvoiceItems = [];
        let selectedClientIndex = -1;

        window.onload = () => {
            renderClients();
            renderProducts();
            renderSavedInvoices();
            loadSettingsFields();
            updateUINames();
        };

        function updateUINames() {
            document.getElementById('nav-company-name').innerText = settings.company;
        }

        // Settings Logic
        function loadSettingsFields() {
            document.getElementById('setCompanyName').value = settings.company;
            document.getElementById('setSlogan').value = settings.slogan;
            document.getElementById('setAddress').value = settings.address;
            document.getElementById('setEmail').value = settings.email;
            document.getElementById('setMobile').value = settings.mobile;
            document.getElementById('setWebsite').value = settings.website;
            document.getElementById('setSignatoryName').value = settings.signatory;
            document.getElementById('setSignatoryDesig').value = settings.designation;
            document.getElementById('termsQuotation').value = settings.terms_quot;
            document.getElementById('termsInvoice').value = settings.terms_inv;
            document.getElementById('termsChallan').value = settings.terms_challan;
            document.getElementById('termsPO').value = settings.terms_po;

            if(settings.logo) document.getElementById('logoPreview').innerHTML = `<img src="${settings.logo}" class="h-full w-full object-contain">`;
            if(settings.seal) document.getElementById('sealPreview').innerHTML = `<img src="${settings.seal}" class="h-full w-full object-contain">`;
            if(settings.sign) document.getElementById('signPreview').innerHTML = `<img src="${settings.sign}" class="h-full w-full object-contain">`;
        }

        async function saveSettings() {
            settings.company = document.getElementById('setCompanyName').value;
            settings.slogan = document.getElementById('setSlogan').value;
            settings.address = document.getElementById('setAddress').value;
            settings.email = document.getElementById('setEmail').value;
            settings.mobile = document.getElementById('setMobile').value;
            settings.website = document.getElementById('setWebsite').value;
            settings.signatory = document.getElementById('setSignatoryName').value;
            settings.designation = document.getElementById('setSignatoryDesig').value;
            settings.terms_quot = document.getElementById('termsQuotation').value;
            settings.terms_inv = document.getElementById('termsInvoice').value;
            settings.terms_challan = document.getElementById('termsChallan').value;
            settings.terms_po = document.getElementById('termsPO').value;

            const logoFile = document.getElementById('setLogo').files[0];
            const sealFile = document.getElementById('setSeal').files[0];
            const signFile = document.getElementById('setSign').files[0];

            if(logoFile) settings.logo = await toBase64(logoFile);
            if(sealFile) settings.seal = await toBase64(sealFile);
            if(signFile) settings.sign = await toBase64(signFile);

            localStorage.setItem('arvin_settings', JSON.stringify(settings));
            updateUINames();
            alert("Settings Saved Successfully!");
            loadSettingsFields();
        }

        const toBase64 = file => new Promise((res, rej) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => res(reader.result);
            reader.onerror = error => rej(error);
        });

        // Tab Logic
        function openTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.getElementById('nav-grid').classList.add('hidden');
            if(tabId === 'invoice') switchInvoiceSubTab('create');
        }

        function showDashboard() {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('nav-grid').classList.remove('hidden');
        }

        function switchInvoiceSubTab(sub) {
            document.querySelectorAll('.invoice-sub-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('invoice-' + sub).classList.add('active');
            const btnCreate = document.getElementById('btn-sub-create');
            const btnSaved = document.getElementById('btn-sub-saved');
            const btnSaveAction = document.getElementById('saveInvoiceBtn');
            if(sub === 'create') {
                btnCreate.classList.add('bg-white', 'shadow-sm', 'text-yellow-600');
                btnSaved.classList.remove('bg-white', 'shadow-sm', 'text-yellow-600');
                btnSaveAction.classList.remove('hidden');
            } else {
                btnSaved.classList.add('bg-white', 'shadow-sm', 'text-yellow-600');
                btnCreate.classList.remove('bg-white', 'shadow-sm', 'text-yellow-600');
                btnSaveAction.classList.add('hidden');
                renderSavedInvoices();
            }
        }

        function startNewInvoiceTab() { initInvoiceFields(); switchInvoiceSubTab('create'); }

        // Client & Product CRUD
        function renderClients() {
            document.getElementById('clientTableBody').innerHTML = clients.map((c, i) => `<tr class="border-b"><td class="p-3 font-bold text-red-600">${i+1}</td><td class="p-3">${c.name}</td><td class="p-3 text-xs">${c.address}</td><td class="p-3">${c.person}</td><td class="p-3">${c.mobile}</td><td class="p-3 text-center"><button onclick="toggleClientModal(true, ${i})" class="text-blue-500 mr-2"><i class="fas fa-edit"></i></button><button onclick="deleteItem('clients', ${i})" class="text-red-400"><i class="fas fa-trash"></i></button></td></tr>`).join('');
        }
        function toggleClientModal(s, idx=-1) {
            const m = document.getElementById('clientModal'); m.classList.toggle('hidden', !s);
            if(s) { if(idx>-1) { const c=clients[idx]; document.getElementById('clientModalTitle').innerText="Edit Client"; document.getElementById('editClientIndex').value=idx; document.getElementById('clientSl').value=idx+1; document.getElementById('clientName').value=c.name; document.getElementById('address').value=c.address; document.getElementById('contactPerson').value=c.person; document.getElementById('mobile').value=c.mobile; } else { document.getElementById('clientForm').reset(); document.getElementById('clientSl').value=clients.length+1; document.getElementById('editClientIndex').value=-1; }}
        }
        document.getElementById('clientForm').onsubmit = (e) => { e.preventDefault(); const idx=parseInt(document.getElementById('editClientIndex').value); const data={ name: document.getElementById('clientName').value, address: document.getElementById('address').value||'N/A', person: document.getElementById('contactPerson').value||'N/A', mobile: document.getElementById('mobile').value||'N/A' }; if(idx>-1) clients[idx]=data; else clients.push(data); localStorage.setItem('arvin_clients_list', JSON.stringify(clients)); renderClients(); toggleClientModal(false); };

        function renderProducts() {
            document.getElementById('productTableBody').innerHTML = products.map((p, i) => `<tr class="border-b"><td class="p-3 font-bold text-orange-600">${i+1}</td><td class="p-3">${p.item}</td><td class="p-3">${p.unit}</td><td class="p-3">${p.rate}</td><td class="p-3">${p.stock}</td><td class="p-3 text-center"><button onclick="toggleProductModal(true, ${i})" class="text-blue-500 mr-2"><i class="fas fa-edit"></i></button><button onclick="deleteItem('products', ${i})" class="text-red-400"><i class="fas fa-trash"></i></button></td></tr>`).join('');
        }
        function toggleProductModal(s, idx=-1) {
            const m = document.getElementById('productModal'); m.classList.toggle('hidden', !s);
            if(s) { if(idx>-1) { const p=products[idx]; document.getElementById('productModalTitle').innerText="Edit Product"; document.getElementById('editProductIndex').value=idx; document.getElementById('productSl').value=idx+1; document.getElementById('itemName').value=p.item; document.getElementById('description').value=p.desc; document.getElementById('unit').value=p.unit; document.getElementById('rate').value=p.rate; document.getElementById('stockQty').value=p.stock; } else { document.getElementById('productForm').reset(); document.getElementById('productSl').value=products.length+1; document.getElementById('editProductIndex').value=-1; }}
        }
        document.getElementById('productForm').onsubmit = (e) => { e.preventDefault(); const idx=parseInt(document.getElementById('editProductIndex').value); const data={ item: document.getElementById('itemName').value, desc: document.getElementById('description').value||'N/A', unit: document.getElementById('unit').value||'N/A', rate: document.getElementById('rate').value||0, stock: document.getElementById('stockQty').value||0 }; if(idx>-1) products[idx]=data; else products.push(data); localStorage.setItem('arvin_products_list', JSON.stringify(products)); renderProducts(); toggleProductModal(false); };

        function deleteItem(t, i) { if(confirm('Delete?')) { if(t==='clients') clients.splice(i,1); else products.splice(i,1); localStorage.setItem('arvin_'+t+'_list', JSON.stringify(t==='clients'?clients:products)); t==='clients'?renderClients():renderProducts(); }}

        // Invoice Logic
        function showClientSuggestions() {
            const val = document.getElementById('invClientInput').value.toLowerCase();
            const list = document.getElementById('clientSuggestions');
            if(!val) { list.style.display = 'none'; return; }
            const matches = clients.filter(c => c.name.toLowerCase().includes(val));
            if(matches.length > 0) {
                list.innerHTML = matches.map(m => `<div class="suggestion-item" onclick="selectClient('${m.name}')"><span class="suggestion-name">${m.name}</span><span class="suggestion-sub"><i class="fas fa-map-marker-alt mr-1"></i>${m.address}</span></div>`).join('');
                list.style.display = 'block';
            } else { list.style.display = 'none'; }
        }

        function selectClient(name) {
            const cIdx = clients.findIndex(c => c.name === name);
            if(cIdx > -1) {
                selectedClientIndex = cIdx;
                document.getElementById('invClientInput').value = name;
                document.getElementById('invAddress').value = clients[cIdx].address;
                document.getElementById('clientSuggestions').style.display = 'none';
            }
        }

        function showProductSuggestions() {
            const val = document.getElementById('invProductInput').value.toLowerCase();
            const list = document.getElementById('productSuggestions');
            if(!val) { list.style.display = 'none'; return; }
            const matches = products.filter(p => p.item.toLowerCase().includes(val));
            if(matches.length > 0) {
                list.innerHTML = matches.map(m => `<div class="suggestion-item" onclick="selectProduct('${m.item}')"><span class="suggestion-name">${m.item}</span><span class="suggestion-desc"><i class="fas fa-info-circle mr-1"></i>${m.desc || 'No description'}</span></div>`).join('');
                list.style.display = 'block';
            } else { list.style.display = 'none'; }
        }

        function selectProduct(item) {
            const pIdx = products.findIndex(p => p.item === item);
            if(pIdx > -1) {
                const p = products[pIdx];
                document.getElementById('invProductInput').value = item;
                document.getElementById('itemDesc').value = p.desc;
                document.getElementById('itemUnit').value = p.unit;
                document.getElementById('itemPrice').value = p.rate;
                calcItemTotal();
                document.getElementById('productSuggestions').style.display = 'none';
            }
        }

        document.addEventListener('click', (e) => { if(!e.target.closest('.autocomplete-wrapper')) document.querySelectorAll('.suggestions-list').forEach(l => l.style.display = 'none'); });

        function initInvoiceFields() {
            const nextNo = 100100 + invoices.length;
            document.getElementById('invNo').value = `INV-${nextNo}`;
            document.getElementById('invDate').valueAsDate = new Date();
            document.getElementById('invClientInput').value = "";
            document.getElementById('invOrderId').value = "";
            document.getElementById('invSubject').value = "";
            document.getElementById('invAddress').value = "";
            document.getElementById('editInvoiceIndex').value = "-1";
            document.getElementById('saveInvoiceBtn').innerText = "SAVE INVOICE";
            selectedClientIndex = -1;
            currentInvoiceItems = [];
            document.getElementById('invPaid').value = 0;
            renderInvoiceItems();
        }

        function toggleItemModal(s) { document.getElementById('itemModal').classList.toggle('hidden', !s); if(s) { document.getElementById('itemForm').reset(); document.getElementById('invProductInput').value = ""; } }
        function calcItemTotal() { const q = document.getElementById('itemQty').value || 0; const p = document.getElementById('itemPrice').value || 0; document.getElementById('itemTotal').value = (q * p).toFixed(2); }

        function addItemToInvoice() {
            const name = document.getElementById('invProductInput').value;
            if(!name) return alert("Select a product");
            currentInvoiceItems.push({ name: name, desc: document.getElementById('itemDesc').value, unit: document.getElementById('itemUnit').value || 'Pcs', qty: document.getElementById('itemQty').value, price: document.getElementById('itemPrice').value, total: document.getElementById('itemTotal').value });
            renderInvoiceItems(); toggleItemModal(false);
        }

        function renderInvoiceItems() {
            let g = 0;
            document.getElementById('invoiceItemsBody').innerHTML = currentInvoiceItems.map((it, i) => { g += parseFloat(it.total); return `<tr class="border-b"><td class="p-3">${i+1}</td><td class="p-3"><b>${it.name}</b></td><td class="p-3">${it.qty}</td><td class="p-3">${it.price}</td><td class="p-3 font-bold">${it.total}</td><td class="p-3"><button onclick="removeItemFromInv(${i})" class="text-red-400"><i class="fas fa-times"></i></button></td></tr>`; }).join('');
            document.getElementById('invGrandTotal').innerText = g.toFixed(2);
            calculateBalance();
        }

        function removeItemFromInv(i) { currentInvoiceItems.splice(i, 1); renderInvoiceItems(); }
        function calculateBalance() { const g = parseFloat(document.getElementById('invGrandTotal').innerText) || 0; const p = parseFloat(document.getElementById('invPaid').value) || 0; document.getElementById('invDue').value = (g - p).toFixed(2); }

        function saveInvoice() {
            const clientName = document.getElementById('invClientInput').value;
            const editIdx = parseInt(document.getElementById('editInvoiceIndex').value);
            if(!clientName || currentInvoiceItems.length === 0) return alert("Fill all details");
            const inv = { id: document.getElementById('invNo').value, client: clientName, orderId: document.getElementById('invOrderId').value, subject: document.getElementById('invSubject').value || '', date: document.getElementById('invDate').value, total: document.getElementById('invGrandTotal').innerText, paid: document.getElementById('invPaid').value, due: document.getElementById('invDue').value, items: JSON.parse(JSON.stringify(currentInvoiceItems)) };
            if(editIdx > -1) { invoices[editIdx] = inv; alert("Invoice Updated!"); } else { invoices.push(inv); alert("Invoice Saved!"); }
            localStorage.setItem('arvin_invoices_list', JSON.stringify(invoices));
            initInvoiceFields(); switchInvoiceSubTab('saved');
        }

        function renderSavedInvoices() {
            const container = document.getElementById('savedInvoicesList');
            if(invoices.length === 0) { container.innerHTML = '<div class="col-span-full text-center py-10 text-gray-400">No saved invoices yet.</div>'; return; }
            container.innerHTML = invoices.map((inv, i) => `
                <div class="bg-white border-l-4 border-yellow-500 shadow-sm rounded-xl p-4 hover:shadow-md transition-all border border-gray-100">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-[11px] font-bold text-yellow-600 uppercase tracking-wider">${inv.id}</span>
                        <span class="text-[10px] text-gray-400">${inv.date}</span>
                    </div>
                    <h4 class="text-sm font-bold text-gray-800 truncate mb-3">${inv.client}</h4>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="editInvoice(${i})" class="flex-1 bg-yellow-50 text-yellow-600 py-2 rounded-lg text-[10px] font-bold">EDIT</button>
                        <button onclick="downloadPDF(${i})" class="flex-1 bg-green-50 text-green-600 py-2 rounded-lg text-[10px] font-bold">PDF</button>
                        <button onclick="deleteInvoice(${i})" class="bg-red-50 text-red-500 px-3 py-2 rounded-lg"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function editInvoice(i) {
            const inv = invoices[i];
            document.getElementById('editInvoiceIndex').value = i;
            document.getElementById('invNo').value = inv.id;
            document.getElementById('invDate').value = inv.date;
            document.getElementById('invOrderId').value = inv.orderId || "";
            document.getElementById('invSubject').value = inv.subject || "";
            document.getElementById('invClientInput').value = inv.client;
            const c = clients.find(cl => cl.name === inv.client);
            document.getElementById('invAddress').value = c ? c.address : "N/A";
            currentInvoiceItems = JSON.parse(JSON.stringify(inv.items));
            document.getElementById('invPaid').value = inv.paid || 0;
            document.getElementById('saveInvoiceBtn').innerText = "UPDATE INVOICE";
            renderInvoiceItems(); switchInvoiceSubTab('create');
        }

        function deleteInvoice(i) { if(confirm('Delete?')) { invoices.splice(i, 1); localStorage.setItem('arvin_invoices_list', JSON.stringify(invoices)); renderSavedInvoices(); }}

        function numberToWords(num) {
            const a = ['', 'One ', 'Two ', 'Three ', 'Four ', 'Five ', 'Six ', 'Seven ', 'Eight ', 'Nine ', 'Ten ', 'Eleven ', 'Twelve ', 'Thirteen ', 'Fourteen ', 'Fifteen ', 'Sixteen ', 'Seventeen ', 'Eighteen ', 'Nineteen '];
            const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
            const n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
            if (!n) return '';
            let str = '';
            str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'Crore ' : '';
            str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'Lakh ' : '';
            str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'Thousand ' : '';
            str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'Hundred ' : '';
            str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) : '';
            return str.trim() + ' Taka Only';
        }

        // PDF Generation (Optimized for Vertical Space)
        function downloadPDF(index) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            const inv = invoices[index];
            const clientData = clients.find(c => c.name === inv.client) || { address: 'N/A', mobile: 'N/A' };

            const addHeaderAndFooter = (data) => {
                // Header
                if(settings.logo) {
                    try { doc.addImage(settings.logo, 'PNG', 14, 10, 20, 20); } catch(e){}
                }

                doc.setFontSize(22);
                doc.setTextColor(0, 0, 0);
                doc.setFont("helvetica", "bold");
                doc.text(settings.company, 14, 20);
                
                doc.setFontSize(9);
                doc.setFont("helvetica", "normal");
                doc.text(settings.slogan, 14, 25);
                doc.text(settings.address, 14, 29);
                doc.text(`Email: ${settings.email} | Mobile: ${settings.mobile}`, 14, 33);

                doc.setFontSize(18);
                doc.setFont("helvetica", "bold");
                doc.text("INVOICE", 196, 20, { align: "right" });

                doc.setDrawColor(0, 0, 0);
                doc.setLineWidth(0.5);
                doc.line(14, 36, 196, 36);

                // Footer logic
                const pageCount = doc.internal.getNumberOfPages();
                doc.setFontSize(8);
                doc.setFont("helvetica", "normal");
                doc.text(`Page ${data.pageNumber} of ${pageCount}`, 196, 288, { align: "right" });
                doc.text("Thank you for your business!", 105, 288, { align: "center" });
            };

            doc.setFontSize(10);
            doc.setFont("helvetica", "bold");
            doc.text("BILL TO:", 14, 45);
            doc.setFont("helvetica", "normal");
            doc.text(inv.client, 14, 50);
            doc.text(clientData.address, 14, 55, { maxWidth: 80 });
            doc.text("Contact: " + clientData.mobile, 14, 65);

            doc.setFont("helvetica", "bold");
            doc.text("INVOICE DETAILS:", 130, 45);
            doc.setFont("helvetica", "normal");
            doc.text(`Invoice No: ${inv.id}`, 130, 50);
            doc.text(`Date: ${inv.date}`, 130, 55);
            doc.text(`Order ID: ${inv.orderId || 'N/A'}`, 130, 60);

            let currentY = 75;
            if (inv.subject) {
                doc.setFont("helvetica", "bold");
                doc.text("Subject: " + inv.subject, 14, currentY, { maxWidth: 180 });
                currentY += 8;
            }

            const tableData = inv.items.map((item, i) => [i + 1, item.name, item.desc || 'N/A', item.unit || 'Pcs', item.price, item.total]);

            // REDUCED MARGINS TO USE MORE SPACE
            doc.autoTable({
                startY: currentY,
                head: [['SL', 'Items', 'Description', 'Unit', 'Rate', 'Total']],
                body: tableData,
                theme: 'grid',
                styles: { textColor: [0, 0, 0], fontSize: 9, lineColor: [0, 0, 0], lineWidth: 0.1 },
                headStyles: { fillColor: false, textColor: [0, 0, 0], fontStyle: 'bold', lineWidth: 0.1, lineColor: [0, 0, 0], halign: 'center' },
                margin: { top: 40, bottom: 45 }, // Reduced bottom margin significantly
                didDrawPage: (data) => { addHeaderAndFooter(data); }
            });

            let finalY = doc.lastAutoTable.finalY + 8;
            
            // Check if summary elements can fit, otherwise add page
            if (finalY > 230) { doc.addPage(); finalY = 45; }

            doc.setFont("helvetica", "bold");
            doc.text("Amount in Words:", 14, finalY);
            doc.setFont("helvetica", "normal");
            doc.text(numberToWords(Math.round(parseFloat(inv.total))), 14, finalY + 5, { maxWidth: 100 });

            doc.setFont("helvetica", "bold");
            doc.text("Grand Total:", 140, finalY);
            doc.text(inv.total, 196, finalY, { align: "right" });
            doc.setFont("helvetica", "normal");
            doc.text("Paid Amount:", 140, finalY + 7);
            doc.text(inv.paid || "0.00", 196, finalY + 7, { align: "right" });
            doc.setFont("helvetica", "bold");
            doc.text("Due Amount:", 140, finalY + 14);
            doc.text(inv.due || "0.00", 196, finalY + 14, { align: "right" });

            // Terms
            finalY += 22;
            doc.setFontSize(8);
            doc.setFont("helvetica", "bold");
            doc.text("TERMS & CONDITIONS:", 14, finalY);
            doc.setFont("helvetica", "normal");
            doc.text(settings.terms_inv || "1. Payment should be made via check/cash. 2. Goods once sold are not returnable.", 14, finalY + 4, { maxWidth: 120 });

            // Signature & Seal
            // Move these relative to the bottom of the page if preferred, but currently relative to finalY
            let sigY = finalY - 5;
            if(settings.seal) { try { doc.addImage(settings.seal, 'PNG', 150, sigY, 25, 25); } catch(e){} }
            if(settings.sign) { try { doc.addImage(settings.sign, 'PNG', 155, sigY + 20, 30, 10); } catch(e){} }
            
            doc.setFont("helvetica", "bold");
            doc.text("Authorized Signature", 150, sigY + 35);
            doc.setFont("helvetica", "normal");
            doc.text(settings.signatory, 150, sigY + 39);
            doc.text(settings.designation, 150, sigY + 43);

            doc.save(`${inv.id}_${inv.client}.pdf`);
        }

        // Filters
        function filterClients() {
            const input = document.getElementById('clientSearch').value.toLowerCase();
            const rows = document.getElementById('clientTableBody').getElementsByTagName('tr');
            Array.from(rows).forEach(row => { row.style.display = row.innerText.toLowerCase().includes(input) ? '' : 'none'; });
        }
        function filterProducts() {
            const input = document.getElementById('productSearch').value.toLowerCase();
            const rows = document.getElementById('productTableBody').getElementsByTagName('tr');
            Array.from(rows).forEach(row => { row.style.display = row.innerText.toLowerCase().includes(input) ? '' : 'none'; });
        }
    </script>
</body>
</html>
